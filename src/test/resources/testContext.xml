<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:jee="http://www.springframework.org/schema/jee"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:util="http://www.springframework.org/schema/util"
  
  xsi:schemaLocation="http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/jee 
                http://www.springframework.org/schema/jee/spring-jee-2.0.xsd
         http://www.springframework.org/schema/aop
                http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
         http://www.springframework.org/schema/util
                http://www.springframework.org/schema/util/spring-util-2.5.xsd">

  <bean id="jndiRootContext" class="nl.xs4all.banaan.tst8.fixtures.InitializedNamingContext">
    <constructor-arg>
      <map>
        <entry key="elders/groet" value="goedemorgen" />
        <entry key="aap" value="aapval" />
        <entry key="dir1" value="DIR1-NODE" />
        <entry key="jdbc" value="JDBC-NODE" />
        <entry key="noot" value="nootval" />
        <entry key="jdbc/mies" value="miesval" />
        <entry key="jdbc/wim" value="wimval" />
        <entry key="dir1/dir2" value="DIR2-NODE" />
        <entry key="dir1/dir2/entry3" value="entry3val" />
      </map>
    </constructor-arg> 
  </bean>

  <bean id="jndiReader" class="nl.xs4all.banaan.tst8.service.impl.JndiReaderImpl">
    <property name="initialContext" ref="jndiRootContext"></property>
  </bean>

  <bean id="propertyReader" 
        class="nl.xs4all.banaan.tst8.service.impl.PropertyReaderImpl" />

  <bean id="mailSender" 
        class="nl.xs4all.banaan.tst8.fixtures.MailSenderFixture" />

  <bean id="notificator" class="nl.xs4all.banaan.tst8.service.impl.NotificatorImpl">
    <property name="mailSender" ref="mailSender" />
  </bean>
  
  <util:properties id="buildInfoProperties"
    location="classpath:/dummy-build.properties"/>
    
  <bean id="buildInfo" class="nl.xs4all.banaan.tst8.service.impl.BuildInfoImpl">
    <property name="properties" ref="buildInfoProperties" />
  </bean>
    
  <bean id="services" class="nl.xs4all.banaan.tst8.service.impl.ServicesImpl">
    <property name="jndiReader" ref="jndiReader" />
    <property name="propertyReader" ref="propertyReader" />
    <property name="notificator" ref="notificator" />
    <property name="buildInfo" ref="buildInfo" />
  </bean>
  
  <bean id="demoApplication" class="nl.xs4all.banaan.tst8.web.DemoApplication">
    <property name="services" ref="services" />
  </bean>

  <bean id="tester" class="nl.xs4all.banaan.tst8.fixtures.BasePageTester">
    <constructor-arg ref="demoApplication" />
  </bean>
  
</beans>